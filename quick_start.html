
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Quick start &#8212; AntADatabase</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'quick_start';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced: Managing the database" href="advanced.html" />
    <link rel="prev" title="AntADatabase" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="AntADatabase - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="AntADatabase - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    AntADatabase
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Quick start</a></li>

<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced: Managing the database</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Support and contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contributing</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/antoinehermant/anta_database" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/antoinehermant/anta_database/issues/new?title=Issue%20on%20page%20%2Fquick_start.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/quick_start.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Quick start</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Quick start</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#browsing-the-database">Browsing the database</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization">Visualization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-datasets">Plot datasets</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-variables">Plot variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-flight-ids">Plot flight IDs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-layer-depths-along-transect">Plot layer depths along transect</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bedmap">BEDMAP</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-files-from-the-database">Get files from the database</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-data-from-the-database">Generate data from the database</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#downscale-the-data">Downscale the data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pro-tips">Pro tips</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="quick-start">
<h1>Quick start<a class="headerlink" href="#quick-start" title="Link to this heading">#</a></h1>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h2>
<p>The Python module can be directly installed from <a class="reference external" href="https://pypi.org/project/anta-database/">PyPI</a> with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install anta_database
</pre></div>
</div>
<p>This Python module is designed to query and visualized data in a AntADatabase folder. The latter has to be first compiled using published IRH datasets, or you can contact for downloading it.
You can already have a look at this guide to have an idea of the features of this tool. This Jupyter Notebook can be directly downloaded (top bar) and ran locally (assuming you had downloaded or compiled the AntADatabase folder).</p>
</section>
<section id="browsing-the-database">
<h2>Browsing the database<a class="headerlink" href="#browsing-the-database" title="Link to this heading">#</a></h2>
<p>First, initialize the Database class by providing the full path to the AntADatabase:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">anta_database</span><span class="w"> </span><span class="kn">import</span> <span class="n">Database</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="s1">&#39;/home/anthe/documents/data/isochrones/AntADatabase/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Use the query() function to browse the database. ‘query()’ without argument will return all metadata contained in the database:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Metadata from query:

  - dataset: Ashmore_2020, Beem_2021, Bodart_2021, Bodart_2025a, Bodart_2025b, Cavitte_2020, Chung_2023, Franke_2025, Jacobel_2005, Leysinger_Vieli_2011, Muldoon_2023, Mulvaney_2023, Sanderson_2024, Siegert_2004, Wang_2023, Winter_2018, Yan_2025

  - institute: AWI, AWI, LDEO, BAS, BAS, AWI, NASA-CRESIS, UTIG-AAD, BAS, NASA-CRESIS, UTIG-AAD, NASA-CRESIS, PRIC-UTIG-AAD, SPRI-NSF-DTU, St-Olaf-College, UTIG, UTIG, PRIC, UTIG, UA

  - project: AGAP-NORTH, POLARGAP, ANTR, ANTR, AGAP-SOUTH-GAMBIT, BBAS, BE-OI, CHARISO, ANTR, SNACC-DML, ICECAP2, IMAFI, OIB, OIB, ANTR, WISE_ISODYN, ICECAP, OIB, ICECAP-OIA, BE-OI, SOAR-CASERTZ, SOAR-DVD, ATRS, AGASEA, GIMBLE, SPC, PPT, US-ITASE, nan

  - acquisition_year: 1970-1979, 1974-1978, 1998-2008, 1999-2025, 2001-2002, 2004, 2005, 2005-2019, 2007-2016, 2009, 2010, 2011, 2012, 2013, 2016, 2016-2018, 2016-2019, 2017, 2018, None

  - age: 800, 2615, 3100, 4700, 4720, 4800, 5600, 6400, 6500, 6940, 7200, 7400, 8500, 9500, 10000, 10001, 10516, 10700, 11100, 12000, 13200, 13500, 15000, 15400, 16000, 16500, 16800, 17500, 17532, 18000, 23500, 25600, 29000, 29100, 29400, 30397, 31400, 36300, 36500, 37600, 38000, 38100, 38200, 38500, 39215, 43600, 46000, 46400, 47110, 48300, 51400, 52200, 62235, 62477, 64400, 72500, 73000, 73300, 73400, 73500, 74200, 75160, 75300, 80007, 82000, 82646, 84300, 90000, 90200, 90400, 91000, 93900, 95500, 96500, 97667, 106300, 108315, 117400, 118342, 121000, 121100, 127800, 128400, 128542, 129000, 132000, 135600, 160000, 160400, 161100, 161900, 166112, 166400, 169100, 170514, 179000, 200100, 202334, 203000, 215000, 220100, 239000, 240397, 243000, 244718, 254500, 262159, 277900, 304000, 320000, 326168, 327300, 336000, 341500, 345462, 352358, 365000, 366500, 381523, 395802, 396000, 399500, 414644, 419800, 473000, 482700, 516800, 560200, 611000, 708500

  - age_unc: -, 305, -, -, 280, 600, -, -, 200, 310, 100, 800, -, -, 300, -, -, -, 100, -, 400, -, -, 1190, -, 790, -, -, -, -, -, 100, -, -, 900, -, 3000, 3600, -, -, 800, 100, 600, 2200, -, 4900, -, 900, -, 1200, -, 100, -, -, 3000, -, -, -, 900, 2200, 1700, -, 7000, -, 1600, -, -, -, 1900, 3570, 1100, -, 7500, 1800, -, 1900, -, 1200, -, -, 1800, 1800, 3600, -, -, -, 10300, -, 3900, 3500, 6760, -, 3600, 19000, -, -, 2600, -, -, -, 3300, -, -, -, -, 5500, -, 4900, -, -, -, 4100, -, 5600, -, -, -, 7900, -, -, -, 9700, -, 13700, -, 22100, 21900, 27200, 35400, 54000

  - var: BASAL_UNIT, BED_ELEV, ICE_THK, IRH_DEPTH, IRH_NUM, SURF_ELEV

  - region: EAIS, WAIS

  - IMBIE_basin: A-Ap, Ap-B, B-C, C-Cp, Cp-D, D-Dp, Dp-E, E-Ep, Ep-F, G-H, J-Jpp, Jpp-K, K-A

  - radar_instrument: AWI-UWB, EMR, DELORES, EMR, HICARS, HICARS, LDC-VHF, MCORDS, MCORDS, EMR, PASIN, PASIN, HICARS, MCORDS, EMR, SPRI-NSF-DTU-radar, nan

  - flight_id: 19983408, 19993131, W32_cL, PEL_GCX0d_R45a_depth, 20181022_01_026_046, THW_SJB2_X51b, ASB_JKB1a_Y38a, W22_cL, VCD_JKB2g_X13a, MCM_JKB1a_EDMC01a, c22b, W57_cL, THW_SJB2_X69b, 20181222_01_001, 20181227_03_001, BH03B-BH03E_proc2, SPC_GCX0d_X112a, B11, B18, W36_cL, 20231129_01_018, RAID2-BV28B_proc2, 19972408, THW_SJB2_BB01a, W19_pL, [ ... ] , LDC-DC-PANO_proc2, 20173002, DMC_JKB1a_ATAL01e, W29_cL, 20181226_01_008, c29a, W08_cL, HRB7-HRB8, PNV03ETOB, SPC_GCX0e_X122a, BV30E-BV30B_proc2, IRH_20172047, 20181222_01_002, c31a, THW_SJB2_X09a, 20181226_01_011, IRH_20172029, BV26E-RAID2_proc2, IR2HI1B_2011354_3, W34_pL, THW_SJB2_Y21b, BH42E-BH42B_proc2, A67_DLRSAR_9MI, PEL_GCX0d_R39a_depth, c11a (found 888, displayed 50)

  - reference: Ashmore et al. (2020), Beem et al. (2021), Bodart et al. (2021), Bodart and Sutter (2025a), Bodart and Sutter (2025b), Cavitte et al. (2020), Chung et al. (2023), Franke et al. (2025), Jacobel and Welch (2005), Leysinger-Vieli et al. (2011), Muldoon et al. (2023), Mulvaney et al. (2023), Sanderson et al. (2024), Siegert and Payne (2024), Wang et al. (2023), Winter et al. (2018), Yan et al. (2025)
  - dataset DOI: https://doi.org/10.5281/zenodo.4945301, https://doi.org/10.15784/601437, https://doi.org/10.5285/F2DE31AF-9F83-44F8-9584-F0190A2CC3EB, https://doi.org/10.5281/zenodo.17348976, https://doi.org/10.5281/zenodo.17348094, https://doi.org/10.15784/601411, https://doi.pangaea.de/10.1594/PANGAEA.957176, https://doi.org/10.1594/PANGAEA.973266, https://doi.org/10.7265/N5R20Z9T, https://doi.org/10.5281/zenodo.15516203, https://doi.org/10.15784/601673, https://doi.pangaea.de/10.1594/PANGAEA.963470, https://doi.org/10.5285/cfafb639-991a-422f-9caa-7793c195d316, https://onlinelibrary.wiley.com/doi/10.1002/esp.1238, https://doi.org/10.1594/PANGAEA.958462, https://doi.org/10.1594/PANGAEA.895528, https://doi.org/10.5281/zenodo.14962526
  - publication DOI: https://doi.org/10.1029/2019GL086663, https://doi.org/10.5194/tc-15-1719-2021, https://doi.org/10.1029/2020JF005927, https://doi.org/10.5194/egusphere-2025-5381, https://doi.org/10.5194/essd-13-4759-2021, https://doi.org/10.5194/tc-17-3461-2023, https://doi.org/10.5194/tc-19-1153-2025, https://doi.org/10.1029/2003GL017210, https://doi.org/10.1029/2010JF001785, https://doi.org/10.1093/climatesystem/dzy004, https://doi.org/10.1017/jog.2024.60, https://doi.org/10.1029/2004GL020290, https://doi.org/10.5194/tc-17-4297-2023, https://doi.org/10.5194/essd-11-1069-2019, https://doi.org/10.1017/jog.2025.15

  - database: /home/anthe/documents/data/isochrones/AntADatabase//AntADatabase.db
  - query params: {&#39;dataset&#39;: None, &#39;institute&#39;: None, &#39;project&#39;: None, &#39;acquisition_year&#39;: None, &#39;age&#39;: None, &#39;var&#39;: None, &#39;flight_id&#39;: None, &#39;region&#39;: None, &#39;IMBIE_basin&#39;: None, &#39;radar_instrument&#39;: None}
  - filter params: {&#39;dataset&#39;: [], &#39;institute&#39;: [], &#39;project&#39;: [], &#39;acquisition_year&#39;: [], &#39;age&#39;: [], &#39;var&#39;: [], &#39;flight_id&#39;: [], &#39;region&#39;: [], &#39;IMBIE_basin&#39;: [], &#39;radar_instrument&#39;: []}
</pre></div>
</div>
</div>
</div>
<p>The query() function takes as argument:</p>
<ul class="simple">
<li><p>dataset: dataset(s) of interest</p></li>
<li><p>institute: institutes(s) that produced the data</p></li>
<li><p>project: project(s) under which the data were collected</p></li>
<li><p>acquisition_year: year(s) in which the radar data were acquired</p></li>
<li><p>age: age(s) in yrs before present of the layer(s) of interest</p></li>
<li><p>region: region(s) of interest. E.g.: ‘EAIS’, ‘WAIS’</p></li>
<li><p>IMBIE_basin: IMBIE basin(s) of interest. E.g.: ‘G-H’, ‘Ap-B’.</p></li>
<li><p>var: variables(s) of interest. Possible variables currently are: ‘IRH_DEPTH’, ‘IRH_DENS’, ‘ICE_THCK’, ‘BED_ELEV’, ‘SURF_ELEV’</p></li>
<li><p>flight_id: ID of a particular flight line. This is useful for explicit flight IDs such as ‘DC_LDC_DIVIDE’</p></li>
</ul>
<p>One can also combine field queries as well as providing lists. Use ‘%’ for searching by regular expressions. Here are a few examples:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Examples of queries:</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;Cavitte_2020&#39;</span><span class="p">)</span> <span class="c1"># all data from Cavitte et al. 2020</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="s1">&#39;38100&#39;</span><span class="p">)</span> <span class="c1"># all datasets with the 38.1ka isochrone</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="s1">&#39;ICE_THK&#39;</span><span class="p">)</span> <span class="c1"># all datasets with IceThk variable</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">IMBIE_basin</span><span class="o">=</span><span class="s1">&#39;G-H&#39;</span><span class="p">)</span> <span class="c1"># all flight lines that cross the G-H basin</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">flight_id</span><span class="o">=</span><span class="s1">&#39;DC_LDC_DIVIDE&#39;</span><span class="p">)</span> <span class="c1"># all layers with the flight ID DC_LDC_DIVIDE</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">flight_id</span><span class="o">=</span><span class="s1">&#39;%WSB%&#39;</span><span class="p">)</span> <span class="c1"># all flight lines with WSB in the flight ID</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Franke_2025&#39;</span><span class="p">,</span> <span class="s1">&#39;Winter_2018&#39;</span><span class="p">],</span> <span class="n">age</span><span class="o">=</span><span class="s1">&#39;38100&#39;</span><span class="p">)</span> <span class="c1"># example of multiple criteria</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Metadata from query:

  - dataset: Franke_2025, Winter_2018

  - institute: AWI

  - project: ANTR

  - acquisition_year: 1998-2008, None

  - age: 38100

  - age_unc: 100

  - var: IRH_DEPTH

  - region: EAIS

  - IMBIE_basin: A-Ap, B-C, Jpp-K, K-A

  - radar_instrument: AWI-UWB, EMR, EMR

  - flight_id: 19983408, 19993131, 20231211_02_017, 20231129_01_015, 20231211_01_023, 19993104, 20231211_02_013, 19993106, 20231211_01_006, 20181222_01_001, 20181227_03_001, 19983207, 20181226_03_003, 19983406, 20022115, 20181226_01_012, EPICA_II_04, 20181226_02_004, 19983402, 20181227_03_005, 20231129_01_018, 19972408, 19972308, 20181226_01_002, 19972313, [ ... ] , 19993118, 20231211_01_024, 20231211_02_006, 20231211_01_015, 20053109, 20181226_01_008, 20013122, 20231129_01_010, 20231211_02_011, 20231211_02_015, 19972415, 19983102, 20181222_01_002, 19983206, 20181226_01_011, 20013012, 20231129_01_007, 20181227_02_002, 20023153, 20181227_02_004, 20231211_02_002, EPICA_II_08, 20023150, 20231211_02_012, 20181226_03_001 (found 215, displayed 50)

  - reference: Franke et al. (2025), Winter et al. (2018)
  - dataset DOI: https://doi.org/10.1594/PANGAEA.973266, https://doi.org/10.1594/PANGAEA.895528
  - publication DOI: https://doi.org/10.5194/tc-19-1153-2025, https://doi.org/10.5194/essd-11-1069-2019

  - database: /home/anthe/documents/data/isochrones/AntADatabase//AntADatabase.db
  - query params: {&#39;dataset&#39;: [&#39;Franke_2025&#39;, &#39;Winter_2018&#39;], &#39;institute&#39;: None, &#39;project&#39;: None, &#39;acquisition_year&#39;: None, &#39;age&#39;: &#39;38100&#39;, &#39;var&#39;: None, &#39;flight_id&#39;: None, &#39;region&#39;: None, &#39;IMBIE_basin&#39;: None, &#39;radar_instrument&#39;: None}
  - filter params: {&#39;dataset&#39;: [], &#39;institute&#39;: [], &#39;project&#39;: [], &#39;acquisition_year&#39;: [], &#39;age&#39;: [], &#39;var&#39;: [], &#39;flight_id&#39;: [], &#39;region&#39;: [], &#39;IMBIE_basin&#39;: [], &#39;radar_instrument&#39;: []}
</pre></div>
</div>
</div>
</div>
<p>The filter_out() function allows the pre-filter out some data so they would never be included in the next queries.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%capture</span>
<span class="n">db</span><span class="o">.</span><span class="n">filter_out</span><span class="p">(</span><span class="n">acquisition_year</span><span class="o">=</span><span class="s1">&#39;&lt;1990&#39;</span><span class="p">)</span>  <span class="c1"># filter out all data acquired before 1990</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">()</span> <span class="c1"># now all queries will exclude data acquired before 1990</span>

<span class="n">db</span><span class="o">.</span><span class="n">filter_out</span><span class="p">()</span>  <span class="c1"># reset all filters to include all data again</span>
<span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualization">
<h2>Visualization<a class="headerlink" href="#visualization" title="Link to this heading">#</a></h2>
<p>Use the results of the query in the plotting functions:</p>
<p>Current implemented plotting functions are:</p>
<ul class="simple">
<li><p>plot.dataset(): plots locations of the data, with different colors for the different datasets (example above)</p></li>
<li><p>plot.institute(): plots locations of the data, with different colors for the different institutes</p></li>
<li><p>plot.var(): color-coded scatter plot of the variable of insterest.</p></li>
<li><p>plot.flight_id(): color-coded trace IDs. Useful for identifying specific traces of interest.</p></li>
<li><p>plot.transect_1D(): plots depths of the IRH and Bed along a single flight line</p></li>
</ul>
<p>In Jupyter Notebook, use ‘%matplotlib qt’ or ‘%matplotlib widget’ depending on your IDE, to switch to the matplotlib widget that allows you to zoom in etc.
Use ‘%matplotlib inline’ (default) to plot the figure in the notebook</p>
<section id="plot-datasets">
<h3>Plot datasets<a class="headerlink" href="#plot-datasets" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">IMBIE_basin</span><span class="o">=</span><span class="s1">&#39;G-H&#39;</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="n">results</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;IRH data crossing the G-H IMBIE basin&#39;</span><span class="p">,</span>
                <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2000</span><span class="p">,</span> <span class="o">-</span><span class="mi">500</span><span class="p">),</span> <span class="c1"># set the plot extent in km</span>
                <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">250</span><span class="p">),</span>
                <span class="n">marker_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="c1"># adjust the size of the markers</span>
                <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/58c166efbbfee2ad17c8faec7847826b010fbf8949ef27153f2514d7b77de954.png" src="_images/58c166efbbfee2ad17c8faec7847826b010fbf8949ef27153f2514d7b77de954.png" />
</div>
</div>
<p>Note: all flight lines in the database are associated with one or several IMBIE basin(s). This depends if the flight line crosses one or multiple basins. The plot above shows all the flight lines which have traced IRH data and that crosses at some point the G-H basin.</p>
</section>
<section id="plot-variables">
<h3>Plot variables<a class="headerlink" href="#plot-variables" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %matplotlib widget</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;37600&#39;</span><span class="p">,</span> <span class="s1">&#39;38000&#39;</span><span class="p">,</span> <span class="s1">&#39;38100&#39;</span><span class="p">,</span> <span class="s1">&#39;38200&#39;</span><span class="p">,</span> <span class="s1">&#39;38500&#39;</span><span class="p">],</span> <span class="n">var</span><span class="o">=</span><span class="s1">&#39;IRH_DEPTH&#39;</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;AntArchitecture 38(.1)ka isochrone depth&#39;</span><span class="p">,</span>
                <span class="n">downsampling_factor</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="c1"># downscale the datasets n times, which makes little visual difference but lighter to plot</span>
                <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">500</span><span class="p">,</span> <span class="mi">2400</span><span class="p">),</span>
                <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2200</span><span class="p">,</span> <span class="mi">2200</span><span class="p">),</span>
                <span class="n">scale_factor</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="c1"># adjust the size of the plot </span>
                <span class="n">marker_size</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span>
                <span class="c1"># save=&#39;AntA_38ka_depth.png&#39;</span>
                <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING: Multiple layers provided:  [&#39;37600&#39;, &#39;38000&#39;, &#39;38100&#39;, &#39;38200&#39;, &#39;38500&#39;] 
Select a unique age for better results
</pre></div>
</div>
<img alt="_images/f178fff0576763754ab021336d396321f88b1874449c0ac079b3268de45902fb.png" src="_images/f178fff0576763754ab021336d396321f88b1874449c0ac079b3268de45902fb.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="s1">&#39;IRH_NUM&#39;</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;IRH Density over the Antarctic Ice Sheet&#39;</span><span class="p">,</span>
                <span class="n">downsampling_factor</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                <span class="n">scale_factor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">marker_size</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span>
                <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b23a03e953e6a5670bd26419a6c87219c47aebcca2adcf9c9342bba2b90eb0b5.png" src="_images/b23a03e953e6a5670bd26419a6c87219c47aebcca2adcf9c9342bba2b90eb0b5.png" />
</div>
</div>
</section>
<section id="plot-flight-ids">
<h3>Plot flight IDs<a class="headerlink" href="#plot-flight-ids" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;Winter%&#39;</span><span class="p">,</span> <span class="n">flight_id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;EPICA%&#39;</span><span class="p">])</span>
<span class="n">db</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">flight_id</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Winter et al. 2018 - EPICA&#39;</span><span class="p">,</span>
                <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">500</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span>
                <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">2200</span><span class="p">),</span>
                <span class="n">marker_size</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span>
                <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/53ac3ac23ca49733aa3c93ca480b1377e8f0dfa96b717957a201ad4768877d1e.png" src="_images/53ac3ac23ca49733aa3c93ca480b1377e8f0dfa96b717957a201ad4768877d1e.png" />
</div>
</div>
</section>
<section id="plot-layer-depths-along-transect">
<h3>Plot layer depths along transect<a class="headerlink" href="#plot-layer-depths-along-transect" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;Cavitte_2020&#39;</span><span class="p">,</span> <span class="n">flight_id</span><span class="o">=</span><span class="s1">&#39;DC_LDC_DIVIDE&#39;</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">transect_1D</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/453643065f991e6741af3ba96b7137f6cbc37775207be188f3b9453297f3770f.png" src="_images/453643065f991e6741af3ba96b7137f6cbc37775207be188f3b9453297f3770f.png" />
</div>
</div>
<p>Use the elevation=True option to plot the transect in absolute elevation above sea level:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">transect_1D</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">elevation</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/6316a436f30be06e98ddccdb6fb28ae584a330f3fb8f93e7dae7c7b6cf913925.png" src="_images/6316a436f30be06e98ddccdb6fb28ae584a330f3fb8f93e7dae7c7b6cf913925.png" />
</div>
</div>
<p>Other possible arguments for the plot methods:</p>
<ul class="simple">
<li><p>cmap: provide your colormap of choice (as LinearSegmentedColormap). Tip: ‘import colormaps as cmaps’ for a large choice of colormaps (see <a class="reference external" href="https://pratiman-91.github.io/colormaps/">Colormaps docs</a></p></li>
<li><p>vmin and vmax: sets the minimum and maximum values for the colorbar.</p></li>
</ul>
</section>
</section>
<section id="bedmap">
<h2>BEDMAP<a class="headerlink" href="#bedmap" title="Link to this heading">#</a></h2>
<p>The AntADatabase now contains all the BEDMAP (1, 2 and 3) data. This is useful to see the whole extent of the existing radar data, or to reconnect the IRH datasets to BEDMAP in order to get the Bed Elevation or Ice Thickness when those are not included.</p>
<p>By default, BEDMAP is not shown in the query, since it is not an IRH dataset. To include it, initialize the Database with the option:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="s1">&#39;/home/anthe/documents/data/isochrones/AntADatabase/&#39;</span><span class="p">,</span> <span class="n">include_BEDMAP</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="get-files-from-the-database">
<h2>Get files from the database<a class="headerlink" href="#get-files-from-the-database" title="Link to this heading">#</a></h2>
<p>You may want to make your own plots or further process the data after querying the database. One option is to get the list of the files from your query and open them individually with either xarray or h5py. For this, use the get_files() function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;Cavitte_2020&#39;</span><span class="p">,</span> <span class="n">flight_id</span><span class="o">=</span><span class="s1">&#39;DC_LDC_DIVIDE&#39;</span><span class="p">)</span>
<span class="n">file_list</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">file_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;h5netcdf&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">Distance</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">IRH_DEPTH</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;xarray.Dataset&gt; Size: 2MB
Dimensions:      (point: 7882, IRH_AGE: 26)
Coordinates:
  * point        (point) int64 63kB 0 1 2 3 4 5 ... 7877 7878 7879 7880 7881
  * IRH_AGE      (IRH_AGE) int64 208B 10000 29400 38100 ... 560200 611000 708500
Data variables:
    PSX          (point) float64 63kB ...
    PSY          (point) float64 63kB ...
    ICE_THK      (point) float64 63kB ...
    BED_ELEV     (point) float64 63kB ...
    SURF_ELEV    (point) float64 63kB ...
    IRH_DEPTH    (point, IRH_AGE) float64 2MB ...
    IRH_AGE_UNC  (IRH_AGE) int64 208B ...
    Distance     (point) float64 63kB ...
    IRH_NUM      (point) int32 32kB ...
Attributes:
    dataset:           Cavitte_2020
    institute:         [&#39;UTIG-AAD&#39;, &#39;NASA-CRESIS&#39;, &#39;BAS&#39;]
    project:           [&#39;ICECAP-OIA&#39;, &#39;OIB&#39;, &#39;BE-OI&#39;]
    radar instrument:  nan
    acquisition year:  none
    flight ID:         DC_LDC_DIVIDE
    flight ID flag:    original
    DOI dataset:       https://doi.org/10.15784/601411
    DOI publication:   https://doi.org/10.5194/essd-13-4759-2021
    IMBIE_basins:      {&quot;E-Ep&quot;: &quot;EAIS&quot;, &quot;Cp-D&quot;: &quot;EAIS&quot;}
</pre></div>
</div>
<img alt="_images/38a641dc312bccae87f2912eb481e3ef2a5adaa6b20d44809ed95bfa30eb7f01.png" src="_images/38a641dc312bccae87f2912eb481e3ef2a5adaa6b20d44809ed95bfa30eb7f01.png" />
</div>
</div>
<p>xarray provides a nice interface for interacting with the data. This works great when dealing with one file, and for example quickly plot all the layers (see above). But xarray adds some overload, which feels slow when reading many files. h5py on the other hand reads the underlying data right away, which is much more efficient:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">h5py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;Cavitte_2020&#39;</span><span class="p">)</span>
<span class="n">file_list</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ds</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;PSX&#39;</span><span class="p">][:],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;PSY&#39;</span><span class="p">][:],</span> <span class="n">c</span><span class="o">=</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;ICE_THK&#39;</span><span class="p">][:],</span> <span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/3900083fe192e7259a12bdf53972adb3ed1cd2b6920d2fe350f3cdb2846c1fd6.png" src="_images/3900083fe192e7259a12bdf53972adb3ed1cd2b6920d2fe350f3cdb2846c1fd6.png" />
</div>
</div>
</section>
<section id="generate-data-from-the-database">
<h2>Generate data from the database<a class="headerlink" href="#generate-data-from-the-database" title="Link to this heading">#</a></h2>
<p>Note: This part could be developed further in the future if there is the need. But for now, I am designing a separate Python module for constraining my ice sheet model of use, which is tailored to this database and other parallel processing libraries.</p>
<p>The data_generator() function reads the query and ‘yield’ the dataframes for later use. It uses h5py to read all the data efficiently, and creates pandas dataframes, including all the variables and ages from the query. Columns for IRH DEPTH are named after the age. Basically, it reads the data with h5py as shown above and restructure it as bit, which can be easier to manage layers than with h5py dimensions.
Here is a quick example of how this can be used for computing the mean layer depth:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;37600&#39;</span><span class="p">,</span> <span class="s1">&#39;38000&#39;</span><span class="p">,</span> <span class="s1">&#39;38100&#39;</span><span class="p">,</span> <span class="s1">&#39;38200&#39;</span><span class="p">,</span> <span class="s1">&#39;38500&#39;</span><span class="p">],</span> <span class="n">var</span><span class="o">=</span><span class="s1">&#39;IRH_DEPTH&#39;</span><span class="p">)</span>
<span class="n">lazy_dfs</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">data_generator</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">mean_depth_trs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">min_depth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
<span class="n">max_depth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">df</span><span class="p">,</span> <span class="n">md</span> <span class="ow">in</span> <span class="n">lazy_dfs</span><span class="p">:</span>
    <span class="n">depth_values</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])]</span><span class="o">.</span><span class="n">values</span>
    <span class="n">mean_depth_trs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">depth_values</span><span class="p">))</span>
    <span class="n">min_depth</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_depth</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">depth_values</span><span class="p">))</span>
    <span class="n">max_depth</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_depth</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">depth_values</span><span class="p">))</span>


<span class="n">mean_depth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">mean_depth_trs</span><span class="p">)</span>
<span class="n">std_dev</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">mean_depth_trs</span><span class="p">,</span> <span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The mean depth of the 38ka isochrone across East Antarctica is </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">mean_depth</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> m ranging from </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">min_depth</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> m to </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">max_depth</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> m.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The mean depth of the 38ka isochrone across East Antarctica is nan m ranging from 313.34 m to 2060.8 m.
</pre></div>
</div>
</div>
</div>
<p>In the for loop, ‘df’ is an individual dataframe from the database, corresponding to a single layer of a single trace from a single dataset. The ‘md’ stores the unique metadata from the current ‘df’. One can then associate the metadata with the current df, for example:</p>
<section id="downscale-the-data">
<h3>Downscale the data<a class="headerlink" href="#downscale-the-data" title="Link to this heading">#</a></h3>
<p>The downsampling_factor argument in the data_generator reduces the size of the generated data by n times. This is useful when dealing with large data where the downscaling has a neglectable influence on the results.
Another solution, probably more straightforward, is the downsample_distance option, which allows to provide a distance in meters by which the data should be average along the transects:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;Cavitte_2020&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="s1">&#39;277900&#39;</span><span class="p">,</span> <span class="n">flight_id</span><span class="o">=</span><span class="s1">&#39;DC_LDC_DIVIDE&#39;</span><span class="p">)</span>
<span class="n">original</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">data_generator</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">downscale_10</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">data_generator</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">downsampling_factor</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="c1"># downsampled_by_distance = db.data_generator(results, downsample_distance=5000)</span>

<span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="n">original</span><span class="p">,</span> <span class="n">downscale_10</span><span class="p">]</span> <span class="c1">#, downsampled_by_distance]</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;original&#39;</span><span class="p">,</span> <span class="s1">&#39;downscale 100&#39;</span><span class="p">]</span> <span class="c1">#, &#39;downsample 5km&#39;]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">lazy_dfs</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">df</span><span class="p">,</span> <span class="n">md</span> <span class="ow">in</span> <span class="n">lazy_dfs</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Distance</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="mi">277900</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">2600</span><span class="p">,</span> <span class="mi">1800</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance along DC_LDC_DIVIDE (km)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Depth (m)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Different downscaling methods for Cavitte 2020 278ka along DC_LDC_DIVIDE&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/664f7c8f46b23e7d8cb8ef3ad3aedc580b12aa6e263d4283bec56098847135d2.png" src="_images/664f7c8f46b23e7d8cb8ef3ad3aedc580b12aa6e263d4283bec56098847135d2.png" />
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="pro-tips">
<h1>Pro tips<a class="headerlink" href="#pro-tips" title="Link to this heading">#</a></h1>
<p>The Database methods always keep the last query in memory. This means that one does not have to actually pass argument.
Example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="s1">&#39;IRH_NUM&#39;</span><span class="p">)</span>
<span class="c1"># db.plot.var() # This is equivalent to the overview plot above. Note that without downscaling it is very heavy to plot.</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">mean_density_trs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">min_density</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
<span class="n">max_density</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">df</span><span class="p">,</span> <span class="n">md</span> <span class="ow">in</span> <span class="n">db</span><span class="o">.</span><span class="n">data_generator</span><span class="p">():</span>    <span class="c1"># without explicitly passing results, it uses the last query.</span>
    <span class="n">density_values</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;IRH_NUM&#39;</span><span class="p">]</span>
    <span class="n">mean_density_trs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">density_values</span><span class="p">))</span>
    <span class="n">min_density</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_density</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">density_values</span><span class="p">))</span>
    <span class="n">max_density</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_density</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">density_values</span><span class="p">))</span>

<span class="n">mean_density</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">mean_density_trs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The average number of picked layers per data point in the AntADatabase is </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">mean_density</span><span class="p">)</span><span class="si">}</span><span class="s2">, ranging from </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">min_density</span><span class="p">)</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">max_density</span><span class="p">)</span><span class="si">}</span><span class="s2">. &quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The average number of picked layers per data point in the AntADatabase is 7, ranging from 1 to 26. 
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">AntADatabase</p>
      </div>
    </a>
    <a class="right-next"
       href="advanced.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Advanced: Managing the database</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Quick start</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#browsing-the-database">Browsing the database</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization">Visualization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-datasets">Plot datasets</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-variables">Plot variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-flight-ids">Plot flight IDs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-layer-depths-along-transect">Plot layer depths along transect</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bedmap">BEDMAP</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-files-from-the-database">Get files from the database</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-data-from-the-database">Generate data from the database</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#downscale-the-data">Downscale the data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pro-tips">Pro tips</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Antoine Hermant
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>